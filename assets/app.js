var Session={key:"__client_session__",is:function(){return !!localStorage.getItem(this.key)},get:function(){var v=localStorage.getItem(this.key);return v?JSON.parse(v):null},set:function(email){localStorage.setItem(this.key,JSON.stringify({email:email,ts:Date.now()}))},clear:function(){localStorage.removeItem(this.key)}};
function ensureAuth(){if(!Session.is()){location.href="login.html"}}
function logout(){Session.clear();location.href="index.html"}
function hash(s){var h=0;for(var i=0;i<s.length;i++){h=(h<<5)-h+s.charCodeAt(i);h|=0}return Math.abs(h)}
function sampleMetrics(email){var r=hash(email||"guest");function n(min,max,k){var v=(r%k)/k;return Math.floor(min+(max-min)*v)}return{revenue:n(12000,80000,97),leads:n(120,1200,89),conversions:n(20,220,83),ctr:(n(12,45,79)/10),cpa:n(4,49,67)}}
function sparkline(elId,points){var w=420,h=90,max=Math.max.apply(null,points),min=Math.min.apply(null,points),sx=w/(points.length-1),ys=h/(max-min||1),p="";for(var i=0;i<points.length;i++){var x=Math.floor(i*sx),y=Math.floor(h-(points[i]-min)*ys);p+=x+","+y+(i<points.length-1?" ":"")}var svg='<svg width="'+w+'" height="'+h+'"><polyline fill="none" stroke="#5b8cff" stroke-width="2" points="'+p+'"/></svg>';var el=document.getElementById(elId);if(el)el.innerHTML=svg}
function fillDashboard(){ensureAuth();var s=Session.get();var m=sampleMetrics(s.email);var rv=document.getElementById("metric-revenue");var ld=document.getElementById("metric-leads");var cn=document.getElementById("metric-conversions");var ct=document.getElementById("metric-ctr");var cp=document.getElementById("metric-cpa");if(rv)rv.textContent="$"+m.revenue.toLocaleString();if(ld)ld.textContent=m.leads;if(cn)cn.textContent=m.conversions;if(ct)ct.textContent=m.ctr.toFixed(1)+"%";if(cp)cp.textContent="$"+m.cpa;var pts=[];for(var i=0;i<24;i++){pts.push((m.revenue/1000)+(i%5)*hash(String(i+s.email))%80/10)}sparkline("spark-revenue",pts);var t=document.getElementById("campaign-rows");if(t){var rows="";for(var j=0;j<6;j++){var name="Campaign #"+(j+1);var spend=(m.revenue/8)+j*420;var clicks=m.leads*3+j*20;var conv=m.conversions+j*3;var rate=((conv/(clicks||1))*100).toFixed(1)+"%";rows+="<tr><td>"+name+"</td><td>$"+Math.floor(spend).toLocaleString()+"</td><td>"+clicks+"</td><td>"+conv+"</td><td><span class=badge>"+rate+"</span></td></tr>"}t.innerHTML=rows}}
function navSetup(){var out=document.getElementById("logout-btn");if(out)out.addEventListener("click",logout)}
function handleLogin(){var f=document.getElementById("login-form");var n=document.getElementById("login-notice");if(!f)return;f.addEventListener("submit",function(e){e.preventDefault();var email=f.email.value.trim();var pw=f.password.value.trim();if(!email||!pw){if(n)n.textContent="Enter email and password";return}Session.set(email);location.href="dashboard.html"})}
function handleBooking(){var f=document.getElementById("booking-form");var n=document.getElementById("booking-notice");if(!f)return;f.addEventListener("submit",function(e){e.preventDefault();var data={name:f.name.value,email:f.email.value,company:f.company.value,website:f.website.value,phone:f.phone.value,service:f.service.value,budget:f.budget.value,notes:f.notes.value,slot:f.slot.value,ts:Date.now()};var arr=JSON.parse(localStorage.getItem("__bookings__")||"[]");arr.push(data);localStorage.setItem("__bookings__",JSON.stringify(arr));if(n)n.textContent="Booking received. We will contact you shortly.";f.reset()})}
var CREATORS=[{name:"Ava Chen",niche:"Productivity",platform:"YouTube",followers:240000},{name:"Leo Martins",niche:"SaaS Growth",platform:"Twitter",followers:120000},{name:"Noah Patel",niche:"DevTools",platform:"YouTube",followers:98000},{name:"Mia Anders",niche:"NoCode",platform:"TikTok",followers:210000},{name:"Sara Ali",niche:"AI Agents",platform:"LinkedIn",followers:56000},{name:"Kenji Ito",niche:"Analytics",platform:"Twitter",followers:87000},{name:"Lena Gomez",niche:"Design",platform:"Instagram",followers:190000},{name:"Arjun Rao",niche:"Data",platform:"YouTube",followers:133000}];
function renderCreators(list){var g=document.getElementById("creator-grid");if(!g)return;var html="";for(var i=0;i<list.length;i++){var c=list[i];html+="<div class=creator><h4>"+c.name+"</h4><p>"+c.niche+" â€¢ "+c.platform+"</p><p>Followers: "+c.followers.toLocaleString()+"</p><div class=actions><a class=cta secondary href=\"#\" data-name=\""+c.name+"\">Invite</a></div></div>"}g.innerHTML=html}
function handleCreatorSearch(){var q=document.getElementById("q");var p=document.getElementById("platform");var n=document.getElementById("niche");if(!q)return;function apply(){var s=q.value.toLowerCase();var pf=p.value;var nc=n.value;var list=CREATORS.filter(function(c){var ok=c.name.toLowerCase().includes(s)||c.niche.toLowerCase().includes(s);if(pf&&pf!=="all")ok=ok&&c.platform===pf;if(nc&&nc!=="all")ok=ok&&c.niche.toLowerCase()===nc.toLowerCase();return ok});renderCreators(list)}q.addEventListener("input",apply);p.addEventListener("change",apply);n.addEventListener("change",apply);apply()}
document.addEventListener("DOMContentLoaded",function(){navSetup();handleLogin();handleBooking();handleCreatorSearch();var d=document.body.getAttribute("data-page");if(d==="dashboard")fillDashboard()});
